"""
Вычислить сумму знакопеременного ряда |х*(n-1)!|/(n-1)!, где х - матрица ранга к (к и матрица задаются случайным образом), n - номер слагаемого. 
Сумма считается вычисленной, если точность вычислений будет не меньше t знаков после запятой. 
У алгоритма д.б. линейная сложность. Операция умножения – поэлементная. Знак первого слагаемого +.
"""

import random
import numpy as np
import random
from decimal import Decimal
import decimal as de

# Создание матрицы х ранга k
k = random.randint(2,10)
x = np.random.uniform(-1,1, (k,k))
print(x)

# Ввод точности t 
print('Введите число t (точность):')
t = int(input())
d = 0
c = x
z = 1
S = de.Decimal(0)
n = 2
sign = 1

# Цикл суммы знакопеременного ряда
while d < t:
    c = c * (n - 1) # Факториал числителя
    z = z * (n - 1) # Факториал знаменателя
    S = de.Decimal(S) + sign * de.Decimal(np.linalg.det(c))/z # Сумма знакопеременного ряда
    d = abs(S.as_tuple().exponent) # Вычисление текущей точности
    sign = -sign # Смена знака
    n += 1
print(f"{S:.{t}f}") # Вывод результата
